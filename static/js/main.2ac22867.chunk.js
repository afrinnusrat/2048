(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{62:function(e,n,t){e.exports=t(82)},67:function(e,n,t){},73:function(e,n,t){},74:function(e,n,t){},77:function(e,n,t){},78:function(e,n,t){},80:function(e,n,t){},81:function(e,n,t){},82:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(11),i=t.n(o),l=(t(67),t(14)),s=t(16),c=t(15),u=t(29),f=t(45),d=t(46),h=t(22),g=t.n(h),m=t(120),p=t(114),v=t(51),b=t.n(v),w=t(112),S=t(119),y=t(118),E=t(115),O=(t(73),t(109)),C=t(53),z=(t(74),function(e){Object(s.a)(t,e);var n=Object(c.a)(t);function t(){var e;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).render=function(){return r.a.createElement(O.a,{position:"sticky"},r.a.createElement("div",{className:"TitleRow"},r.a.createElement(C.a,{variant:"h4",component:"h1"},e.props.winCondition),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6",component:"h2"},"Sum"),r.a.createElement(C.a,{variant:"h6",component:"h2"},e.props.sum)),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"h6",component:"h2"},"Best"),r.a.createElement(C.a,{variant:"h6",component:"h2"},e.props.best))))},e}return t}(a.Component)),N=t(121),k=(t(77),function(e){Object(s.a)(t,e);var n=Object(c.a)(t);function t(e){var a;Object(l.a)(this,t),(a=n.call(this,e)).valuetext=function(e){return"{value}"},a.toggleDisplayRow=function(){a.setState((function(e){return!0===e.displayRow?{displayRow:!1}:{displayRow:!0}}))},a.handleChange=function(e,n){e.stopPropagation(),a.setState((function(){return{value:n}}))},a.handleConfirm=function(){var e=a.state.value;a.props.handleChangeGrid(e),a.toggleDisplayRow()},a.render=function(){return r.a.createElement("div",{className:"Selector"},r.a.createElement(w.a,{onClick:a.toggleDisplayRow},"Change Grid Size"),a.state.displayRow&&r.a.createElement("div",{className:"Selector-secondRow"},r.a.createElement(N.a,{value:a.state.value,getAriaValueText:a.valuetext,"aria-labelledby":"grid-size-adjust-slider",valueLabelDisplay:"off",step:1,min:3,max:8,marks:a.marks,onChange:a.handleChange}),r.a.createElement(w.a,{onClick:a.handleConfirm},"Confirm")))},a.marks=[{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"}];var o=JSON.parse(window.localStorage.getItem("gridSize"))||4;return a.state={displayRow:!1,value:o},a}return t}(a.Component)),B=t(48),J=t.n(B),R=t(49),D=t.n(R),j=t(113),I=t(116),W=t(117),A=(t(78),function(e){Object(s.a)(t,e);var n=Object(c.a)(t);function t(e){var a;return Object(l.a)(this,t),(a=n.call(this,e)).openDialog=function(){a.setState((function(){return{showDialog:!0}}))},a.handleCloseDialog=function(){a.setState((function(){return{showDialog:!1}}))},a.handleConfirm=function(){a.props.handleReset(),a.handleCloseDialog()},a.render=function(){return r.a.createElement("div",{className:"Commands"},r.a.createElement(j.a,{badgeContent:a.props.numberOfUndos,color:"primary"},r.a.createElement(p.a,{onClick:a.props.handleUndo},r.a.createElement(J.a,null))),r.a.createElement(p.a,{onClick:a.openDialog},r.a.createElement(D.a,null)),r.a.createElement(S.a,{open:a.state.showDialog,onClose:a.handleCloseDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(E.a,{id:"alert-dialog-title"},"Confirm Reset?"),r.a.createElement(I.a,null,r.a.createElement(W.a,{id:"alert-dialog-description"},"Current Progess will be lost.")),r.a.createElement(y.a,null,r.a.createElement(w.a,{onClick:a.handleCloseDialog,color:"primary"},"Disagree"),r.a.createElement(w.a,{onClick:a.handleConfirm,color:"primary",autoFocus:!0},"Agree"))))},a.state={showDialog:!1},a}return t}(a.Component)),x=t(50),U=t(84),T=(t(80),{1:"#66bb6a",2:"#26a69a",3:"#26c6da",4:"#29b6f6",5:"#42a5f5",6:"#5c6bc0",7:"#7e57c2",8:"#ffca28",9:"#ab47bc",10:"#ec407a",11:"#ef5350"}),F=function(e){Object(s.a)(t,e);var n=Object(c.a)(t);function t(){var e;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).render=function(){var n=e.props,t=n.size,a=n.board;return r.a.createElement("div",{className:"Board",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)"),gridTemplateRows:"repeat(".concat(t,", 1fr)")}},a.map((function(n){return r.a.createElement(U.a,{style:{backgroundColor:e.getColor(n.value),color:"#FFF"},key:"".concat(n.row,"-").concat(n.col),className:"Board-block"},r.a.createElement(C.a,null," ",n.value," "))})))},e}return Object(x.a)(t,[{key:"getColor",value:function(e){for(var n=Math.log2(e);n>11;)n-=11;for(var t in T)if(parseInt(t)===n)return T[t]}}]),t}(a.Component),G=function(e){Object(s.a)(t,e);var n=Object(c.a)(t);function t(e){var a;Object(l.a)(this,t),(a=n.call(this,e)).componentDidMount=function(){a.state.allBoards.some((function(e){return e.sum>0}))||a.startGame()},a.handleInput=function(e){var n="";e.dir?n=e.dir:e.key&&(n=e.key),"Right"===n||"a"===n||"A"===n||"ArrowRight"===n?a.goRight():"Left"===n||"d"===n||"D"===n||"ArrowLeft"===n?a.goLeft():"Up"===n||"w"===n||"W"===n||"ArrowUp"===n?a.goUp():"Down"!==n&&"s"!==n&&"S"!==n&&"ArrowDown"!==n||a.goDown()},a.handleSnackbarClose=function(){a.setState((function(){return{snackbar:!1}}))},a.handleChangeGrid=function(e){var n=a.state.allBoards.find((function(n){return n.size===e}));a.setState((function(){return{gridSize:e}}),(function(){window.localStorage.setItem("gridSize",JSON.stringify(e)),0===n.sum&&a.startGame()}))},a.startGame=function(){for(var e=JSON.parse(JSON.stringify(a.state.allBoards)),n=Object(u.a)(e.find((function(e){return e.size===a.state.gridSize})).board),t=[],r=[2,2,2,2,4];2!==t.length;){var o=Math.floor(Math.random()*n.length);t.includes(o)||t.push(o)}t.forEach((function(e){n[e].value=r[Math.floor(Math.random()*r.length)]}));var i=g.a.sumBy(n.filter((function(e){return e.value})),"value"),l=e.findIndex((function(e){return e.size===a.state.gridSize}));e[l].board=n,e[l].sum=i,e[l].best=i>e[l].best?i:e[l].best,a.setState((function(){return{allBoards:e}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(e))}))},a.goUp=function(){for(var e=a.state.gridSize,n=JSON.parse(JSON.stringify(a.state.allBoards)),t=JSON.parse(JSON.stringify(n.find((function(n){return n.size===e})).board)),r=n.find((function(n){return n.size===e})).board,o=[],i=[],l=[],s=function(e){o.push(r.filter((function(n){return n.col===e})))},c=1;c<=e;c++)s(c);o.forEach((function(n){for(var t=n.map((function(e){return e.value})).filter((function(e){return e})),a=[],r=0;r<t.length;r++)t[r]===t[r+1]?(a.push(t[r]+t[r+1]),r++):a.push(t[r]);for(;a.length!==e;)a.push("");n.forEach((function(e,n){return e.value=a[n]}))}));for(var f=0;f<o.length;f++)l.push.apply(l,Object(u.a)(o[f]));for(var d=function(n){for(var t=function(e){i.push(l.find((function(t){return t.row===n&&t.col===e})))},a=1;a<=e;a++)t(a)},h=1;h<=e;h++)d(h);if(!g.a.isEqual(t,i)){var m=n.findIndex((function(n){return n.size===e}));n[m].history.push(t),n[m].history.length>5&&n[m].history.shift(),n[m].board=i,a.setState((function(){return{allBoards:n}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(n)),n[m].needToWin?a.checkForWin():a.addRandomNumber()}))}},a.goDown=function(){for(var e=a.state.gridSize,n=JSON.parse(JSON.stringify(a.state.allBoards)),t=JSON.parse(JSON.stringify(n.find((function(n){return n.size===e})).board)),r=n.find((function(n){return n.size===e})).board,o=[],i=[],l=[],s=function(e){o.push(r.filter((function(n){return n.col===e})))},c=1;c<=e;c++)s(c);o.forEach((function(n){for(var t=n.map((function(e){return e.value})).filter((function(e){return e})),a=[],r=t.length-1;r>=0;r--)t[r]===t[r-1]?(a.unshift(t[r]+t[r-1]),r--):a.unshift(t[r]);for(;a.length!==e;)a.unshift("");n.forEach((function(e,n){return e.value=a[n]}))}));for(var f=0;f<o.length;f++)l.push.apply(l,Object(u.a)(o[f]));for(var d=function(n){for(var t=function(e){i.push(l.find((function(t){return t.row===n&&t.col===e})))},a=1;a<=e;a++)t(a)},h=1;h<=e;h++)d(h);if(!g.a.isEqual(t,i)){var m=n.findIndex((function(n){return n.size===e}));n[m].history.push(t),n[m].history.length>5&&n[m].history.shift(),n[m].board=i,a.setState((function(){return{allBoards:n}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(n)),n[m].needToWin?a.checkForWin():a.addRandomNumber()}))}},a.goLeft=function(){for(var e=a.state.gridSize,n=JSON.parse(JSON.stringify(a.state.allBoards)),t=JSON.parse(JSON.stringify(n.find((function(n){return n.size===e})).board)),r=n.find((function(n){return n.size===e})).board,o=[],i=[],l=[],s=function(e){o.push(r.filter((function(n){return n.row===e})))},c=1;c<=e;c++)s(c);o.forEach((function(n){for(var t=n.map((function(e){return e.value})).filter((function(e){return e})),a=[],r=0;r<t.length;r++)t[r]===t[r+1]?(a.push(t[r]+t[r+1]),r++):a.push(t[r]);for(;a.length!==e;)a.push("");n.forEach((function(e,n){return e.value=a[n]}))}));for(var f=0;f<o.length;f++)l.push.apply(l,Object(u.a)(o[f]));for(var d=function(n){for(var t=function(e){i.push(l.find((function(t){return t.row===n&&t.col===e})))},a=1;a<=e;a++)t(a)},h=1;h<=e;h++)d(h);if(!g.a.isEqual(t,i)){var m=n.findIndex((function(n){return n.size===e}));n[m].history.push(t),n[m].history.length>5&&n[m].history.shift(),n[m].board=i,a.setState((function(){return{allBoards:n}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(n)),n[m].needToWin?a.checkForWin():a.addRandomNumber()}))}},a.goRight=function(){for(var e=a.state.gridSize,n=JSON.parse(JSON.stringify(a.state.allBoards)),t=JSON.parse(JSON.stringify(n.find((function(n){return n.size===e})).board)),r=n.find((function(n){return n.size===e})).board,o=[],i=[],l=[],s=function(e){o.push(r.filter((function(n){return n.row===e})))},c=1;c<=e;c++)s(c);o.forEach((function(n){for(var t=n.map((function(e){return e.value})).filter((function(e){return e})),a=[],r=t.length-1;r>=0;r--)t[r]===t[r-1]?(a.unshift(t[r]+t[r-1]),r--):a.unshift(t[r]);for(;a.length!==e;)a.unshift("");n.forEach((function(e,n){return e.value=a[n]}))}));for(var f=0;f<o.length;f++)l.push.apply(l,Object(u.a)(o[f]));for(var d=function(n){for(var t=function(e){i.push(l.find((function(t){return t.row===n&&t.col===e})))},a=1;a<=e;a++)t(a)},h=1;h<=e;h++)d(h);if(!g.a.isEqual(t,i)){var m=n.findIndex((function(n){return n.size===e}));n[m].board=i,n[m].history.push(t),n[m].history.length>5&&n[m].history.shift(),a.setState((function(){return{allBoards:n}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(n)),n[m].needToWin?a.checkForWin():a.addRandomNumber()}))}},a.addRandomNumber=function(){var e=[2,2,2,2,4],n=JSON.parse(JSON.stringify(a.state.allBoards)),t=n.find((function(e){return e.size===a.state.gridSize})).board,r=t.filter((function(e){return!e.value})),o=r[Math.floor(Math.random()*r.length)],i=t.findIndex((function(e){return e.row===o.row&&e.col===o.col}));t[i].value=e[Math.floor(Math.random()*e.length)];var l=g.a.sumBy(t.filter((function(e){return e.value})),"value"),s=n.findIndex((function(e){return e.size===a.state.gridSize}));n[s].board=t,n[s].sum=l,n[s].best=l>n[s].best?l:n[s].best,a.setState((function(){return{allBoards:n}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(n))}))},a.handleReset=function(){var e=JSON.parse(JSON.stringify(a.state.allBoards)),n=e.find((function(e){return e.size===a.state.gridSize})).board;n.forEach((function(e){e.value=""}));var t=e.findIndex((function(e){return e.size===a.state.gridSize}));e[t].board=n,e[t].needToWin=!0,e[t].history=[],a.setState({allBoards:e},(function(){window.localStorage.setItem("allBoards",JSON.stringify(e)),a.startGame()}))},a.handleUndo=function(){var e=JSON.parse(JSON.stringify(a.state.allBoards)),n=e.find((function(e){return e.size===a.state.gridSize}));n.board=n.history.pop();var t=g.a.sumBy(n.board.filter((function(e){return e.value})),"value");n.sum=t,a.setState({allBoards:e},(function(){window.localStorage.setItem("allBoards",JSON.stringify(e))}))},a.checkForWin=function(){var e=JSON.parse(JSON.stringify(a.state.allBoards)),n=e.find((function(e){return e.size===a.state.gridSize}));n.board.some((function(e){return e.value===n.winCondition}))?(n.needToWin=!1,a.setState((function(){return{allBoards:e,winDialog:!0}}),(function(){window.localStorage.setItem("allBoards",JSON.stringify(e))}))):a.addRandomNumber()},a.handleDialogClose=function(){a.setState((function(){return{winDialog:!1}}),a.addRandomNumber)},a.render=function(){var e=a.state.allBoards.find((function(e){return e.size===a.state.gridSize}));return r.a.createElement(f.a,{onSwiped:a.handleInput},r.a.createElement("div",{className:"Game",tabIndex:0,onKeyDown:a.handleInput},r.a.createElement(z,{winCondition:e.winCondition,sum:e.sum,best:e.best}),r.a.createElement("div",{className:"Game-secondRow"},r.a.createElement(k,{handleChangeGrid:a.handleChangeGrid}),r.a.createElement(A,{numberOfUndos:e.history.length,handleReset:a.handleReset,handleUndo:a.handleUndo})),r.a.createElement(F,{size:a.state.gridSize,board:e.board})),d.isBrowser&&r.a.createElement(m.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a.state.snackbar,autoHideDuration:6e3,onClose:a.handleSnackbarClose,message:"Use AWSD or Arrow Keys to Play.",action:r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{size:"small","aria-label":"close",color:"inherit",onClick:a.handleSnackbarClose},r.a.createElement(b.a,{fontSize:"small"})))}),r.a.createElement(S.a,{open:a.state.winDialog,onClose:a.handleDialogClose,"aria-labelledby":"alert-win-dialog-title"},r.a.createElement(E.a,{id:"alert-win-dialog-title"},"You Win!"),r.a.createElement(y.a,null,r.a.createElement(w.a,{onClick:a.handleReset,color:"primary"},"Reset"),r.a.createElement(w.a,{onClick:a.handleDialogClose,color:"primary",autoFocus:!0},"Keep Playing"))))};var o=JSON.parse(window.localStorage.getItem("gridSize"))||4;a.upperLimit=8,a.lowerLimit=3,a.winConditions=[{size:3,condition:1024},{size:4,condition:2048},{size:5,condition:2048},{size:6,condition:2048},{size:7,condition:2048},{size:8,condition:2048}];for(var i=[],s=function(e){i.push({size:e,board:[],sum:0,best:0,history:[],winCondition:a.winConditions.find((function(n){return n.size===e})).condition,needToWin:!0})},c=a.lowerLimit;c<=a.upperLimit;c++)s(c);i.forEach((function(e){for(var n=1;n<=e.size;n++)for(var t=1;t<=e.size;t++)e.board.push({row:n,col:t,value:""})}));var h=JSON.parse(window.localStorage.getItem("allBoards"))||i;return a.state={gridSize:o,allBoards:h,snackbar:!0,winDialog:!1},a}return t}(a.Component),L=(t(81),function(e){Object(s.a)(t,e);var n=Object(c.a)(t);function t(){var e;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).render=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(G,null))},e}return t}(a.Component)),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/2048",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/2048","/service-worker.js");M?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):P(n,e)}))}}()}},[[62,1,2]]]);
//# sourceMappingURL=main.2ac22867.chunk.js.map